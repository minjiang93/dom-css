<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>事件传播</title>
	<style type="text/css">
		#box1 {
			width: 300px;
			height: 300px;
			background-color: yellowgreen;
		}
		#box2 {
			width: 200px;
			height: 200px;
			background-color: yellow;
		}
		#box3 {
			width: 100px;
			height: 100px;
			background-color: skyblue;
		}
	</style>

	<script type="text/javascript">
		window.onload = function(){

			var box1 = document.getElementById("box1");
			var box2 = document.getElementById("box2");
			var box3 = document.getElementById("box3");

			bind(box1,"click", function(){
				alert("this is box1");
			});

			bind(box2,"click", function(){
				alert("this is box2");
			});

			bind(box3,"click", function(){
				alert("this is box3")
			});

		};
		 function bind(element, eventStr, callback){
		 	if(element.addEventListener){
		 		//大部分浏览器
		 		element.addEventListener(eventStr, callback, false);
		 	}else{
		 		//IE8-
		 		/*
		 		 * 使用callback.call(obj)来改变this指向
		 		 */
		 		element.attachEvent("on"+eventStr, function(){
		 			//在匿名函数中调用回调函数
		 			callback.call(obj); //指向button
		 		});
		 	}
		 };
	</script>
</head>
<body>
	<div id="box1">
		<div id="box2">
			<div id="box3"></div>
		</div>
	</div>
</body>
</html>

